{% extends "page.html" %}


{%- block subtitle %}
    Linked Data
{% endblock -%}

{% block breadcrumb_content %}
  <li class="active">{% link_for _('Linked Data'), controller='ckanext.data_recommendation.controllers:DataLinkedController', action='graph' %}</li>
{% endblock %}


{%- block primary %}
    {% block page_header %}
    {% endblock %}
  <section class="module">
    <div class="module-content">
        <h1 class="page-heading">Data Linked</h1>
    </div>

    <ul class="nav nav-tabs nav-tabs-plain">
        <li class="active">
            <a href="#"><i class="icon-cloud" aria-hidden="true"></i>標籤雲</a>
        </li>
    </ul>
    <div class="module-content" data-module="stack_chart" id="stack_chart"  style="width: 100%; height: 450px;left: -25px;position: relative"></div>
        {# % for organization, tags in organization_tags.items() %}
            <h2>{{ organization }}</h2>
            <ul>
                {% for tag in tags %}
                    <li>{{ tag[0] }}: {{ tag[1] }}
                {% endfor %}
            </ul>
        {% endfor % #}
        <script>
            var organizations = {{ organization_tags|safe }};

            tags = {}
            for(var i in organizations) {
                // console.log(organization)
                for(var j in organizations[i]){
                    tag = organizations[i][j]
                    if(!tags.hasOwnProperty(tag[0])){
                        tags[tag[0]] = 0
                    }
                    tags[tag[0]] += tag[1]

                }
            }

        </script>
    </div>

      {% resource 'data_recommendation/stack_chart.js' %}
      {% resource 'data_recommendation/tag_cloud.js' %}
      {% resource 'data_recommendation/jqcloud.css' %}
  </section>

{%- endblock %}

{% block secondary %}{% endblock %}
